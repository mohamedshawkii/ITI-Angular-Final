<div class="cart-container">
  <div class="cart-content">
    <h1 class="cart-subtitle">Shopping Cart</h1>
    @if(cartItems.length === 0) {
    <p class="cart-empty-message">Your cart is empty. Start shopping now!</p>
    } @for (item of cartItems; track $index) {
    <div class="cart-item">
      <div class="cart-item-content">
        <h2 class="cart-item-title">{{ item.name }}</h2>
        <p class="cart-item-price">{{ item.price }}</p>
        <div class="quantity-controls">
          <div class="quantity-display">
            <span class="quantity-label">Quantity:</span>
            <div class="quantity-buttons">
              <button
                class="btn btn-quantity btn-decrease"
                (click)="decreaseQuantity(item.id)"
                [disabled]="item.quantity <= 1"
              >
                <i class="fa fa-minus FontSize">-</i>
              </button>
              <span class="quantity-value">{{ item.quantity }}</span>
              <button
                class="btn btn-quantity btn-increase"
                (click)="increaseQuantity(item.id)"
              >
                <i class="fa fa-plus FontSize">+</i>
              </button>
            </div>
          </div>
          <div class="item-total">
            <span class="item-total-label">Total:</span>
            <span class="item-total-value"
              >${{ (item.price * item.quantity).toFixed(2) }}</span
            >
          </div>
        </div>

        <button class="btn btn-danger" (click)="removeItem(item.id)">
          Remove
        </button>
      </div>
    </div>
    }
  </div>
  <div class="cart-sidebar">
    <h1 class="cart-sidebar-title">Payment</h1>
    <div class="cart-sidebar-content">
      <p class="cart-total">Total: ${{ totalInDollars }}</p>
    </div>

    <div class="d-flex gap-2 align-items-center mb-3">
      <input
        type="checkbox"
        name="isCashOnDelivery"
        id="isCashOnDelivery"
        class="form-check form-check-input"
        [(ngModel)]="isCashOnDelivery"
        [disabled]="cartItems.length === 0"
        (change)="toggleCashOnDelivery()"
      />
      <span>Pay with Cash on Delivery</span>
    </div>
    <a
      (click)="checkout()"
      [routerLink]="
        cartItems.length > 0 && !isCashOnDelivery ? '/payment' : null
      "
      [class.disabled]="cartItems.length === 0"
      class="nav-link btn btn-primary w-100 mr-auto"
    >
      Checkout
    </a>
  </div>
</div>
